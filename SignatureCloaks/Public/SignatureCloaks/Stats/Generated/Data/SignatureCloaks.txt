new entry "OBJ_SignatureCloaks_Box"
type "Object"
using "_Container"
data "RootTemplate" "1f3fbcdc-8243-4508-ae7b-bfd05e82eaa9"
data "ValueOverride" "1"
data "Weight" "1"
data "Rarity" "Rare"

new entry "MAG_Blade_Cloak"
type "Armor"
using "_Back_Magic"
data "RootTemplate" "3b013b8a-e4d3-4dff-9449-8f18ab46e9eb"
data "ValueUUID" "c5ad02e9-b4d4-4df1-a9cd-02b80d017eaa"
data "Rarity" "VeryRare"
data "PassivesOnEquip" "MAG_Blade_Cloak_Passive;MAG_Fire_Speed_Passive"

new entry "MAG_Blade_Cloak_Passive"
type "PassiveData"
data "DisplayName" "h44ec0a99g84c4g4635ga9d0g0057e95d31c0;1"
data "Description" "hfd5ceb83gb96bg4d7bg80bdgc676ae5571c4;1"
data "Boosts" "CharacterWeaponDamage(CharismaModifier, Fire)"

new entry "MAG_Fire_Speed_Passive"
type "PassiveData"
data "DisplayName" "h375eda7eg1cb5g45e4gbb17g0a77ade167ac;1"
data "Description" "h095cedf1g629fg43fdga2d1g992c32583d00;1"
data "StatsFunctorContext" "OnDamage"
data "Conditions" "IsSpell() and IsDamageTypeFire()"
data "StatsFunctors" "ApplyStatus(SELF, MAG_MOMENTUM, 100, 2);ApplyStatus(SELF, MAG_MOMENTUM_DURATION_TECHNICAL, 100, 1)"

new entry "MAG_Gale_Cloak"
type "Armor"
using "_Back_Magic"
data "RootTemplate" "76914788-e7a2-47d4-b258-15cc96748b6c"
data "ValueUUID" "c5ad02e9-b4d4-4df1-a9cd-02b80d017eaa"
data "Rarity" "VeryRare"
data "PassivesOnEquip" "MAG_Gale_Cloak_Passive;MAG_MagicalDurability_Passive_Gale"

new entry "MAG_Gale_Cloak_Passive"
type "PassiveData"
data "DisplayName" "hb4c773ccg838dg4ed8g85d3g6e23a9259055;1"
data "Description" "h6fe23effg0696g4fa9g9561ge314a9394490;1"
data "ExtraDescription" "ha90cbcf2gf55dg4c5dgbf12g23452f8b87d2;1"
data "Icon" "PassiveFeature_ArcaneBattery"
data "PriorityOrder" "1"
data "Properties" "IsToggled;Highlighted;Temporary;OncePerLongRest"
data "StatsFunctorContext" "OnCast"
data "Conditions" "IsSpell() and HasStatus('MAG_MAGIC_ITEM_POWERED_CAST', context.Source)"
data "StatsFunctors" "RemoveStatus(MAG_MAGIC_ITEM_POWERED_CAST)"
data "ToggleOnFunctors" "ApplyStatus(MAG_MAGIC_ITEM_POWERED_CAST, 100, -1)"
data "ToggleOffFunctors" "RemoveStatus(MAG_MAGIC_ITEM_POWERED_CAST)"
data "ToggleOffContext" "OnCastResolved"

new entry "MAG_MagicalDurability_Passive_Gale"
type "PassiveData"
data "DisplayName" "hb6ebdce9g8b20g4c6cga35eg91f2a05da673;1"
data "Description" "h96c18cbfgecdbg49f9ga878g0b4b98062380;2"
data "DescriptionParams" "1"
data "Boosts" "IF(IsSpell()):RollBonus(SavingThrow,1)"

new entry "MAG_Kithraki_Cloak"
type "Armor"
using "_Back_Magic"
data "RootTemplate" "46c884fc-8284-403a-9f2f-cbc1c904c7f8"
data "ValueUUID" "c5ad02e9-b4d4-4df1-a9cd-02b80d017eaa"
data "Rarity" "VeryRare"
data "Boosts" "Resistance(Psychic, Resistant)"
data "PassivesOnEquip" "Parry_Githyanki;Parry_Githyanki_EquipTrigger"

new entry "MAG_Sharran_Cloak"
type "Armor"
using "_Back_Magic"
data "RootTemplate" "7eb810ca-cc5e-4bfd-9056-138ec664e46c"
data "ValueUUID" "c5ad02e9-b4d4-4df1-a9cd-02b80d017eaa"
data "Rarity" "VeryRare"
data "Boosts" "Resistance(Radiant, Resistant)"
data "PassivesOnEquip" "MAG_Shadow_SpellDCBonusWhileObscured_Cloak_Passive"

new entry "MAG_Shadow_SpellDCBonusWhileObscured_Cloak_Passive"
type "PassiveData"
data "DisplayName" "h7d5b8a3ag4b68g4188ga322g8139d71f56ac;1"
data "Description" "hd10a6af4g2695g448dgb4a4g19a6d9012b21;1"
data "DescriptionParams" "2"
data "Icon" "PassiveFeature_Generic_Darkness"
data "StatsFunctorContext" "OnObscurityChanged;OnCreate"
data "StatsFunctors" "IF(not HasObscuredState(ObscuredState.Clear)):ApplyStatus(MAG_SHADOW_OBSCURITY_SPELL_DC_Cloak, 100, -1);IF(HasObscuredState(ObscuredState.Clear)):RemoveStatus(MAG_SHADOW_OBSCURITY_SPELL_DC_Cloak)"

new entry "MAG_SHADOW_OBSCURITY_SPELL_DC_Cloak"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "h7d5b8a3ag4b68g4188ga322g8139d71f56ac;1"
data "Description" "hd10a6af4g2695g448dgb4a4g19a6d9012b21;1"
data "DescriptionParams" "2"
data "Icon" "PassiveFeature_Generic_Darkness"
data "StackId" "MAG_SHADOW_OBSCURITY_SPELL_DC_Cloak"
data "StackType" "Overwrite"
data "Boosts" "RollBonus(MeleeSpellAttack, 2);RollBonus(RangedSpellAttack,2)"
data "RemoveConditions" "HasObscuredState(ObscuredState.Clear)"
data "RemoveEvents" "OnObscurityChanged"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog"

new entry "MAG_Selunite_Cloak"
type "Armor"
using "_Back_Magic"
data "RootTemplate" "cba4fbb1-abe9-4a17-baa7-98cfe0c1ea55"
data "ValueUUID" "c5ad02e9-b4d4-4df1-a9cd-02b80d017eaa"
data "Rarity" "VeryRare"
data "Boosts" "Resistance(Necrotic, Resistant)"
data "PassivesOnEquip" "MAG_Shadow_SpellDCBonusWhileIlluminated_Cloak_Passive"

new entry "MAG_Shadow_SpellDCBonusWhileIlluminated_Cloak_Passive"
type "PassiveData"
data "DisplayName" "hf981062fg4394g4194g88d1g3c7a7d94b189;1"
data "Description" "ha758b58bg3be9g4302ga137gd5275c49f8c9;1"
data "DescriptionParams" "2"
data "Icon" "PassiveFeature_Generic_Light"
data "StatsFunctorContext" "OnObscurityChanged;OnCreate"
data "StatsFunctors" "IF(HasObscuredState(ObscuredState.Clear)):ApplyStatus(MAG_Illuminated_SPELL_DC_Cloak, 100, -1);IF(not HasObscuredState(ObscuredState.Clear)):RemoveStatus(MAG_Illuminated_SPELL_DC_Cloak)"

new entry "MAG_Illuminated_SPELL_DC_Cloak"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "hf981062fg4394g4194g88d1g3c7a7d94b189;1"
data "Description" "ha758b58bg3be9g4302ga137gd5275c49f8c9;1"
data "DescriptionParams" "2"
data "Icon" "PassiveFeature_Generic_Light"
data "StackId" "MAG_Illuminated_SPELL_DC_Cloak"
data "StackType" "Overwrite"
data "Boosts" "RollBonus(MeleeSpellAttack, 2);RollBonus(RangedSpellAttack,2)"
data "RemoveConditions" "not HasObscuredState(ObscuredState.Clear)"
data "RemoveEvents" "OnObscurityChanged"
data "StatusPropertyFlags" "DisableOverhead;DisableCombatlog"

new entry "MAG_Bat_Cloak"
type "Armor"
using "_Back_Magic"
data "RootTemplate" "a5284a2b-e118-4d49-a2f7-49dc903309e1"
data "ValueUUID" "c5ad02e9-b4d4-4df1-a9cd-02b80d017eaa"
data "Rarity" "VeryRare"
data "Boosts" "UnlockSpell(Shout_EPI_Astarion_TurnIntoBat_Cloak);"
data "PassivesOnEquip" "MAG_Bat_Cloak_Passive"

new entry "Shout_EPI_Astarion_TurnIntoBat_Cloak"
type "SpellData"
data "SpellType" "Shout"
using "Shout_WildShape_Raven"
data "SpellContainerID" "EMPTY"
data "SpellProperties" "ApplyStatus(EPI_ASTARION_WILDSHAPE_BAT_Cloak,100,-1)"
data "Icon" "Action_WildShape_Bat"
data "DisplayName" "h1349b642g59d7g423bg8d1fgbe6cf519262a;1"
data "Description" "h73a7ec8cgc5fcg4863gb538g3d659418fabe;1"
data "DescriptionParams" ""
data "PrepareSound" ""
data "PrepareLoopSound" ""
data "CastSound" "Action_Cast_Gen_TurnIntoBat_01"
data "UseCosts" "ActionPoint:1;"
data "SpellAnimation" "5b266f21-af95-4cca-a196-c386038342ef,,;,,;56ca881c-6ed1-4e1a-80ba-99dd838a5724,,;b9fe2c38-7fcf-4489-965c-8588a34f0c4a,,;89676dd3-a8b9-4fc9-a045-e076e814da72,,;,,;60582f9c-149c-48a8-86ab-fa9a0d89c6f5,,;,,;,,"
data "PrepareEffect" "62fa9d2f-ec0b-4900-a455-ec9b5e6e3eb4"
data "CastEffect" "b33cd35f-a5b7-494e-aae1-e1944057f11c"

new entry "EPI_ASTARION_WILDSHAPE_BAT_Cloak"
type "StatusData"
data "StatusType" "POLYMORPHED"
using "WILDSHAPE_RAVEN_PLAYER"
data "DisplayName" "he0dd3e16g3e34g429fgb050gd02a5dec2780;2"
data "Icon" "Action_WildShape_Bat"
data "Boosts" "VoicebarkBlock();BlockSpellCast();UnlockSpell(Shout_WildShape_Dismiss);IF(HasPassive('WildShape_Combat',context.Source)):UnlockSpell(Shout_WildShape_Combat_Heal,AddChildren,d136c5d9-0ff0-43da-acce-a74a07f8d6bf);Attribute(Floating);IgnoreFallDamage();UnlockSpell(Projectile_Fly_Spell)"
data "OnRemoveFunctors" "ApplyStatus(SELF,EPI_ASTARION_WILDSHAPE_BAT_REMOVE_VFX,100,1);ApplyStatus(SELF, WILDSHAPE_TECHNICAL,100,1)"
data "TemplateID" "0f3456b8-82f1-431d-bae5-7b2870308519"
data "ApplyEffect" "9c789871-1da3-4778-9063-a91bcb449c57"

new entry "MAG_Bat_Cloak_Passive"
type "PassiveData"
data "DisplayName" "he0d22705g4d52g4257gb9ddge487ea4b644b;1"
data "Description" "h96e7682dg2fd9g46e1gb1bdgd4aebd5b4d54;1"
data "Icon" "PassiveFeature_DarkDevotion"
data "Properties" "Highlighted"
data "Boosts" "IF(not HasObscuredState(ObscuredState.Clear)):Advantage(AttackRoll); "

new entry "MAG_Brimstone_Cloak"
type "Armor"
using "_Back_Magic"
data "RootTemplate" "2c492055-ed5c-4906-98f6-b408aff44740"
data "ValueUUID" "c5ad02e9-b4d4-4df1-a9cd-02b80d017eaa"
data "Rarity" "VeryRare"
data "Boosts" "Resistance(Fire, Immune)"
data "PassivesOnEquip" "MAG_Brimstone_Cloak_Passive"

new entry "MAG_Brimstone_Cloak_Passive"
type "PassiveData"
data "DisplayName" "ha5bcb236g2846g40acg8f8fg2bdd4068430b;1"
data "Description" "hb3355effg5085g41c9gb760gb797887e5f42;1"
data "DescriptionParams" "DealDamage(1d4, Fire)"
data "Properties" "OncePerAttack"
data "StatsFunctorContext" "OnDamaged"
data "Conditions" "IsMeleeAttack() and not IsRedirectedDamage()"
data "StatsFunctors" "DealDamage(SWAP, 1d4, Fire, Magical)"

new entry "MAG_Halsin_Cloak"
type "Armor"
using "_Back_Magic"
data "RootTemplate" "2e411ab3-d14d-4328-969b-09c5a4326221"
data "ValueUUID" "c5ad02e9-b4d4-4df1-a9cd-02b80d017eaa"
data "Rarity" "VeryRare"
data "PassivesOnEquip" "MAG_Halsin_Cloak_Passive;MAG_Halsin_Cloak_Damage_Passive"

new entry "MAG_Halsin_Cloak_Passive"
type "PassiveData"
data "DisplayName" "h30ec174ag60d1g41aeg94c3g12ed82e91b27;1"
data "Description" "h88c176acg2174g4aafg825fgbcfeb1937f8a;1"
data "Boosts" "Advantage(Concentration)"

new entry "MAG_Halsin_Cloak_Damage_Passive"
type "PassiveData"
data "DisplayName" "h35dc751cg3661g4f29ga652g602559053f3c;1"
data "Description" "h922f621ag0657g410cgac4cg8983e3b0a109;1"
data "DescriptionParams" "DealDamage(1d4, Poison)"
data "StatsFunctorContext" "OnStatusApplied"
data "StatsFunctors" "IF(StatusHasStatusGroup(context.StatusId, 'SG_Polymorph') or StatusHasStatusGroup(context.StatusId, 'SG_Polymorph_BeastShape')):ApplyStatus(MAG_Halsin_Cloak_Damage, 100, -1)"

new entry "MAG_Halsin_Cloak_Damage"
type "StatusData"
data "StatusType" "BOOST"
data "DisplayName" "h35dc751cg3661g4f29ga652g602559053f3c;1"
data "Description" "h922f621ag0657g410cgac4cg8983e3b0a109;1"
data "DescriptionParams" "DealDamage(1d4, Poison)"
data "Icon" "GenericIcon_Intent_Buff"
data "StackId" "MAG_Halsin_Cloak_Damage"
data "Boosts" "DamageBonus(1d4,Poison)"
data "RemoveConditions" "StatusHasStatusGroup(context.StatusId, 'SG_Polymorph') or StatusHasStatusGroup(context.StatusId, 'SG_Polymorph_BeastShape')"
data "RemoveEvents" "OnStatusRemoved"
data "StatusPropertyFlags" "DisableCombatlog;DisableOverhead"

new entry "MAG_Minthara_Cloak"
type "Armor"
using "_Back_Magic"
data "RootTemplate" "151471c4-2726-46e4-8e73-3a45efd7c51e"
data "ValueUUID" "c5ad02e9-b4d4-4df1-a9cd-02b80d017eaa"
data "Rarity" "VeryRare"
data "PassivesOnEquip" "Surprise_Immunity_Minthara;MAG_BonusAttack_AgainstMarked_Passive"

new entry "Surprise_Immunity_Minthara"
type "PassiveData"
using "Alert"
data "DisplayName" "hd4f4a0e7g43f7g477dgbe4cg7e947c5a5205;1"
data "Description" "h3dcba21dgbbf9g4469gacbdg60bc33f7ac5b;1"
data "DescriptionParams" ""
data "Icon" "PassiveFeature_Generic_Threat"
data "Boosts" "StatusImmunity(SURPRISED)"

new entry "MAG_Protagonist_Cloak"
type "Armor"
using "_Back_Magic"
data "RootTemplate" "18320459-e214-4644-bb95-aae8ebb0d338"
data "ValueUUID" "c5ad02e9-b4d4-4df1-a9cd-02b80d017eaa"
data "Rarity" "VeryRare"
data "PassivesOnEquip" "MAG_SecondChance_Passive_Cloak;MAG_SecondChance_Resource_Passive;DeathSavingThrow_Passive_Cloak"

new entry "DeathSavingThrow_Passive_Cloak"
type "PassiveData"
data "DisplayName" "h1dad0913gdbd8g402bgac3cg8fa5219e6999;1"
data "Description" "hc57d5037g9b69g4089ga8b1gcb1d7563bf92;1"
data "Boosts" "Advantage(DeathSavingThrow)"

new entry "MAG_SecondChance_Passive_Cloak"
type "PassiveData"
data "DisplayName" "hfde5e27age910g4127gb6b3gdfad310f68c8;1"
data "Description" "h62d5952cg9b4fg4b84ga3f8gcdd4514c8c24;3"
data "Boosts" "UnlockInterrupt(Interrupt_MAG_SecondChance)"